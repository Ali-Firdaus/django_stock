{% extends 'base.html' %}

{% block content %}

{% load humanize %}
<h1>Current Portfolio</h1>

<table class="table table table-striped table-bordered">
  <thead class="thead-dark">
    <tr>
      <th scope="col">Company Name</th>
      <th scope="col">Stock Price</th>
      <th scope="col">Previous Close</th>
      <th scope="col">Market Cap</th>
      <th scope="col">YTD Change</th>
      <th scope="col">52 Week High</th>
      <th scope="col">52 Week Low</th>
      
    </tr>
  </thead>
  <tbody>
    
{% if ticker %}
    {% for output_item in output %}
    	<tr>
    	
    		<th scope="row">{{ output_item.companyName }}</th>
    		<td>${{ output_item.latestPrice }}</td>
    		<td>${{ output_item.previousClose }}</td>
    		<td>${{ output_item.marketCap|intword }}</td>
    		<td>{{ output_item.ytdChange|floatformat:"3"|intcomma }}</td>
    		<td>{{ output_item.week52High }}</td>
    		<td>{{ output_item.week52Low }}</td>
    				
    	</tr>
    {% endfor %}

{% endif %}
    
  </tbody>
</table>
<br/>

<h2>Manage Stocks</h2>

<form action="{% url 'add_stock' %}" class="d-flex" role="search" method="POST">
 		{% csrf_token %}
        <input class="form-control me-2" type="search" placeholder="Add Companies" aria-label="Search" name="ticker">
        <button class="btn btn-outline-success" type="submit">Add</button>
</form>



<table class="table table table-striped table-bordered">
  <thead class="thead-dark">
    <tr>
      <th scope="col">Ticker Symbol</th>
      <th scope="col">Delete Stocks</th>
      
    </tr>
  </thead>
  
  <tbody>
    
{% if ticker %}
    {% for item in ticker %}
    	<tr>
    	
    		<th scope="row">{{ item }}</th>
    		<td><a href="{% url 'delete' item.id %}"> Delete Stock <a/></td>
    				
    	</tr>

	{% endfor %}
{% endif %}

<br/>

{% endblock %}